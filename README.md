# cards-ocr
## Краткое описание алгоритма
Согласно заданию, нас интересуют карты в средней части стола. Следовательно, мы можем отбросить точки в верхней и нижней частях изображения, чтобы сократить время выполнения алгоритма. 

Далее, в выделенной средней части изображения выполним поиск объектов "карта". Для поиска контуров карт используется модифицированный алгоритм "жука". Первым этапом исходное изображение преобразуется в изображение в оттенках серого, причем значение оттенка будем считать как среднее арифметическое красного, зелёного и синего компонентов цвета точки. Затем проводим пороговую бинаризацию изображения.

Краткое описание алгоритма "жука":
Воображаемый жук начинает свой путь на белом (черном) фоне с граничной точки выбранного участка изображения и движется по направлению к области черных (белых) элементов изображения. После того, как жук пересечет черный (белый) элемент, он поворачивается налево и переходит к следующему элементу. Если этот элемент черный (белый), жук снова поворачивает налево, если же элемент оказывается белым (черным), то жук поворачивает направо. Эта процедура повторяется до тех пор, пока жук не вернется в исходную точку.

Далее из списка полученных контуров выбираем объекты типа "карта". Под картой будем понимать любой объект прямоугольный формы (большая часть точек контура расположены вблизи прямоугольника, ограничивающего объект). 

Далее в каждой карте произведём поиск символа масти и достоинства карты. Поиск контуров объектов будем производить аналогично поиску карт, воспользовавшись алгоритмом жука. 

Найденные элементы изображения на картах будем распозновать сравнивая их с эталонными образцами. Эталонные образцы находятся в папке resoucres/templates и получены в ходе анализа серии изображений, на которых изображен заранее известный символ. Цветом пикселя эталонного изображения закодирована вероятность нахождения в данной точке "значимого" пикселя анализируемого изображения. Это похоже на сравнение по трафарету - если подавляющее большинство черных точек анализируемого изображения попадают в область ненулевой вероятности (в просвет трафарета), то можно считать, что изображения совпадают.

## Параметры запуска
java -jar <target> [--debug=[true/false]]

target - путь к директории с изображениями, подлежащими анализу.
--debug=true/false - флаг включения отладки. При значении true каждый этап распознавания сохраняется в виде отдельного изображения в папке debug, которая создается автоматически в директории <target>
  
## Развитие
Улучшить алгоритм распознавания можно заменив шаблонное распознавание символов на картах простейшей нейронной сетью прямого распостранения.
